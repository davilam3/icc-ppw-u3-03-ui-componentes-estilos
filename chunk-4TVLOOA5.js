import{a as B}from"./chunk-TKVE5ZSX.js";import{a as P,b as p,c as R,d as D,e as G,f as I,g as A,h as V,i as j}from"./chunk-SSDLFJYM.js";import{i as L,j as T,m as k}from"./chunk-QBVPGZRV.js";import{I as N,u as M}from"./chunk-A6BW764O.js";import{k as y}from"./chunk-4FYF5LVS.js";import{Hb as E,Jb as f,Pb as b,Ra as l,Rb as a,Sb as v,W as c,ba as w,ca as F,eb as C,ma as _,oa as S,p as x,qb as m,rb as d,vb as h,wb as o,xb as r,yb as u}from"./chunk-KTUCGMTK.js";function q(t,n){if(t&1&&(o(0,"div",6),w(),o(1,"svg",20),u(2,"path",21),r(),F(),o(3,"span"),a(4),r()()),t&2){let i=f();l(4),v(i.errorMessage())}}function z(t,n){if(t&1&&(o(0,"span",12),a(1),r()),t&2){let i=f();l(),v(i.formUtils.getFieldError(i.loginForm,"email"))}}function H(t,n){if(t&1&&(o(0,"span",12),a(1),r()),t&2){let i=f();l(),v(i.formUtils.getFieldError(i.loginForm,"password"))}}function O(t,n){t&1&&(u(0,"span",22),a(1," Iniciando sesi\xF3n... "))}function J(t,n){t&1&&a(0," Iniciar Sesi\xF3n ")}var U=class t{fb=c(V);authService=c(N);router=c(L);loginForm;loginTrigger=_(null);loginResource=M({params:()=>this.loginTrigger(),stream:({params:n})=>n?this.authService.login(n.email,n.password):x(null)});formUtils=B;constructor(){this.loginForm=this.fb.group({email:["",[p.required,p.email]],password:["",[p.required,p.minLength(6)]]}),S(()=>{this.loginResource.hasValue()&&this.loginResource.value()&&(console.log("Login exitoso, navegando a /simpsons"),this.router.navigate(["/simpsons"]))})}onSubmit(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}let{email:n,password:i}=this.loginForm.value;this.loginTrigger.set({email:n,password:i})}loading=this.loginResource.isLoading;errorMessage=()=>{let n=this.loginResource.error();if(!n)return"";let i=n.code||"";return{"auth/invalid-email":"El correo electr\xF3nico no es v\xE1lido","auth/user-disabled":"El usuario ha sido deshabilitado","auth/user-not-found":"No existe un usuario con este correo","auth/wrong-password":"Contrase\xF1a incorrecta","auth/invalid-credential":"Credenciales inv\xE1lidas"}[i]||"Error al iniciar sesi\xF3n"};get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=C({type:t,selectors:[["app-login-page"]],decls:33,vars:10,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-linear-to-br","from-primary","to-secondary","p-4"],[1,"card","w-full","max-w-md","bg-base-100","shadow-2xl"],[1,"card-body"],[1,"text-center","mb-6"],[1,"text-3xl","font-bold","text-primary","mb-2"],[1,"text-base-content/70"],[1,"alert","alert-error","mb-4"],[3,"ngSubmit","formGroup"],[1,"form-control","mb-6"],[1,"label"],[1,"label-text"],["type","email","formControlName","email","placeholder","ejemplo@correo.com",1,"input","input-bordered","w-full","placeholder:opacity-25"],[1,"block","text-red-500","text-sm","mt-1"],["type","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"input","input-bordered","w-full","placeholder:opacity-25"],[1,"form-control","mt-6"],["type","submit",1,"btn","btn-primary","w-full",3,"disabled"],[1,"divider"],[1,"text-center","mt-4"],[1,"text-sm","text-base-content/70"],["routerLink","/register",1,"link","link-primary","font-semibold"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"h-6","w-6","shrink-0","stroke-current"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"loading","loading-spinner","loading-sm"]],template:function(i,e){if(i&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),a(5,"\xA1Bienvenido!"),r(),o(6,"p",5),a(7,"Inicia sesi\xF3n para continuar"),r()(),m(8,q,5,1,"div",6),o(9,"form",7),E("ngSubmit",function(){return e.onSubmit()}),o(10,"div",8)(11,"label",9)(12,"span",10),a(13,"Correo electr\xF3nico"),r()(),u(14,"input",11),m(15,z,2,1,"span",12),r(),o(16,"div",8)(17,"label",9)(18,"span",10),a(19,"Contrase\xF1a"),r()(),u(20,"input",13),m(21,H,2,1,"span",12),r(),o(22,"div",14)(23,"button",15),m(24,O,2,0)(25,J,1,0),r()()(),o(26,"div",16),a(27,"O"),r(),o(28,"div",17)(29,"p",18),a(30," \xBFNo tienes cuenta? "),o(31,"a",19),a(32," Reg\xEDstrate aqu\xED "),r()()()()()()),i&2){let s,g;l(8),d(e.loginResource.error()?8:-1),l(),h("formGroup",e.loginForm),l(5),b("input-error",(e.email==null?null:e.email.invalid)&&(e.email==null?null:e.email.touched)),l(),d((s=e.loginForm.get("email"))!=null&&s.invalid&&((s=e.loginForm.get("email"))!=null&&s.touched)?15:-1),l(5),b("input-error",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),l(),d((g=e.loginForm.get("password"))!=null&&g.invalid&&((g=e.loginForm.get("password"))!=null&&g.touched)?21:-1),l(2),h("disabled",e.loading()||e.loginForm.invalid),l(),d(e.loading()?24:25)}},dependencies:[y,k,T,j,G,P,R,D,A,I],encapsulation:2})};export{U as LoginPage};
