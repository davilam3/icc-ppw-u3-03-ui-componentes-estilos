import{a as q}from"./chunk-OP4CBW3X.js";import{a as T,b as u,c as N,d as D,e as G,f as L,g as V,h as I,i as A,j}from"./chunk-3N3QZNMZ.js";import{F as U,g as y,h as M,k}from"./chunk-LK7MMN56.js";import{j as R}from"./chunk-3GREFYWT.js";import{Ea as a,Ra as S,V as h,aa as C,ab as l,ba as _,bb as m,fb as b,gb as n,hb as o,ib as d,la as x,na as P,o as F,ob as E,qb as p,wb as w,yb as s,zb as g}from"./chunk-IHFSFQAP.js";function z(i,r){if(i&1&&(n(0,"div",6),C(),n(1,"svg",21),d(2,"path",22),o(),_(),n(3,"span"),s(4),o()()),i&2){let t=p();a(4),g(t.errorMessage())}}function H(i,r){if(i&1&&(n(0,"span",12),s(1),o()),i&2){let t=p();a(),g(t.formUtils.getFieldError(t.registerForm,"email"))}}function O(i,r){if(i&1&&(n(0,"span",12),s(1),o()),i&2){let t=p();a(),g(t.formUtils.getFieldError(t.registerForm,"password"))}}function Y(i,r){if(i&1&&(n(0,"span",12),s(1),o()),i&2){let t=p();a(),g(t.formUtils.getFieldError(t.registerForm,"confirmPassword"))}}function J(i,r){i&1&&(d(0,"span",23),s(1," Creando cuenta... "))}function K(i,r){i&1&&s(0," Crear Cuenta ")}var B=class i{fb=h(I);authService=h(j);router=h(y);registerForm;registerTrigger=x(null);registerResource=U({params:()=>this.registerTrigger(),stream:({params:r})=>r?this.authService.register(r.email,r.password):F(null)});formUtils=q;constructor(){this.registerForm=this.fb.group({email:["",[u.required,u.email]],password:["",[u.required,u.minLength(6)]],confirmPassword:["",[u.required]]},{validators:this.passwordMatchValidator}),P(()=>{this.registerResource.hasValue()&&this.registerResource.value()&&(console.log("Registro exitoso, navegando a /simpsons"),this.router.navigate(["/simpsons"]))})}passwordMatchValidator(r){let t=r.get("password"),e=r.get("confirmPassword");return t&&e&&t.value!==e.value?(e.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):null}onSubmit(){if(this.registerForm.invalid){this.registerForm.markAllAsTouched();return}let{email:r,password:t}=this.registerForm.value;this.registerTrigger.set({email:r,password:t})}loading=this.registerResource.isLoading;errorMessage=()=>{let r=this.registerResource.error();if(!r)return"";let t=r.code||"";return{"auth/email-already-in-use":"Este correo ya est\xE1 registrado","auth/invalid-email":"El correo electr\xF3nico no es v\xE1lido","auth/operation-not-allowed":"Operaci\xF3n no permitida","auth/weak-password":"La contrase\xF1a es muy d\xE9bil"}[t]||"Error al registrar usuario"};get email(){return this.registerForm.get("email")}get password(){return this.registerForm.get("password")}get confirmPassword(){return this.registerForm.get("confirmPassword")}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=S({type:i,selectors:[["app-register-page"]],decls:38,vars:13,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gradient-to-br","from-secondary","to-accent","p-4"],[1,"card","w-full","max-w-md","bg-base-100","shadow-2xl"],[1,"card-body"],[1,"text-center","mb-6"],[1,"text-3xl","font-bold","text-secondary","mb-2"],[1,"text-base-content/70"],[1,"alert","alert-error","mb-4"],[3,"ngSubmit","formGroup"],[1,"form-control"],[1,"label"],[1,"label-text"],["type","email","formControlName","email","placeholder","ejemplo@correo.com",1,"input","input-bordered","w-full"],[1,"block","text-red-500","text-sm","mt-1"],[1,"form-control","mt-4"],["type","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"input","input-bordered","w-full"],["type","password","formControlName","confirmPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"input","input-bordered","w-full"],[1,"form-control","mt-6"],["type","submit",1,"btn","btn-secondary","w-full",3,"disabled"],[1,"text-center","mt-4"],[1,"text-sm","text-base-content/70"],["routerLink","/auth/login","routerLink","/auth/login",1,"link","link-secondary","font-semibold"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"stroke-current","shrink-0","h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"loading","loading-spinner","loading-sm"]],template:function(t,e){if(t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),s(5,"Crear Cuenta"),o(),n(6,"p",5),s(7,"Reg\xEDstrate para comenzar"),o()(),l(8,z,5,1,"div",6),n(9,"form",7),E("ngSubmit",function(){return e.onSubmit()}),n(10,"div",8)(11,"label",9)(12,"span",10),s(13,"Correo electr\xF3nico"),o()(),d(14,"input",11),l(15,H,2,1,"span",12),o(),n(16,"div",13)(17,"label",9)(18,"span",10),s(19,"Contrase\xF1a"),o()(),d(20,"input",14),l(21,O,2,1,"span",12),o(),n(22,"div",13)(23,"label",9)(24,"span",10),s(25,"Confirmar Contrase\xF1a"),o()(),d(26,"input",15),l(27,Y,2,1,"span",12),o(),n(28,"div",16)(29,"button",17),l(30,J,2,0)(31,K,1,0),o()()(),n(32,"div",18)(33,"p",19),s(34," \xBFYa tienes cuenta? "),n(35,"a",20),s(36," Inicia sesi\xF3n aqu\xED "),o()()()(),s(37,"a "),o()()),t&2){let c,f,v;a(8),m(e.registerResource.error()?8:-1),a(),b("formGroup",e.registerForm),a(5),w("input-error",(e.email==null?null:e.email.invalid)&&(e.email==null?null:e.email.touched)),a(),m((c=e.registerForm.get("email"))!=null&&c.invalid&&((c=e.registerForm.get("email"))!=null&&c.touched)?15:-1),a(5),w("input-error",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),a(),m((f=e.registerForm.get("password"))!=null&&f.invalid&&((f=e.registerForm.get("password"))!=null&&f.touched)?21:-1),a(5),w("input-error",(e.confirmPassword==null?null:e.confirmPassword.invalid)&&(e.confirmPassword==null?null:e.confirmPassword.touched)),a(),m((v=e.registerForm.get("confirmPassword"))!=null&&v.invalid&&((v=e.registerForm.get("confirmPassword"))!=null&&v.touched)?27:-1),a(2),b("disabled",e.loading()||e.registerForm.invalid),a(),m(e.loading()?30:31)}},dependencies:[R,A,G,T,N,D,V,L,k,M],encapsulation:2})};export{B as RegisterPage};
